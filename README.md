ДЗ 12 - Практика с SELinux

Задачи:
* Запустить nginx на нестандартном порту тремя разными способами (переключатели setsebool, добавление нестандартного порта в имеющийся тип, формирование и установка модуля Selinux)
* Обеспечить работоспособность приложения при включенном Selinux.

Первая задача решается на машине Selinux скриптом [selinux_part1.sh](selinux_part1.sh), который запускается вагрантом.

Во второй задаче неработоспособность стенда связана с тем, что для файлов в каталоге /etc/named используется тип etc_t, тогда как демон работает в домене named_t и предполагает доступ к файлам соответствующего типа.

1 вариант решения - поменять тип контекста безопасности для каталога /etc/named: "sudo chcon -R -t named_zone_t /etc/named". Это, как я понимаю, наиболее безопасный вариант, но решение описано в методичке, поэтому здесь детально не рассматривается.

Вариант 2 - разрешить домену named_t манипулировать файлами в etc_t. Однако это избыточно расширяет возможности named, снижая защищённость системы. Решение реализуется файлом selinux_module.sh (запускается вагрантом), который собирает подготовленный модуль из badNamed.te. Работоспособность решения демонстрируется скриншотом (сдаётся вне репозитория)

Ещё более опасен вариант 3 - перевести named_t в режим permissive: semanage permissive -a named_t. 



